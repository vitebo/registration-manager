# `~/gateways/`

Gateways é a camada de comunicação com o mundo externo, muito conhecido como `services` em outras aplicações.

Com os adapters conseguimos abstrair quem é esse "mundo externo". Por exemplo:

Aqui temos implementações do gateway utilizando o `driver` `http-client` para comunicação com a API,
um gateway utilizando o `driver` `storage` para comunicação com o `localstorage` e ainda temos um adapter
onde salvamos os dados em memória.

Isso é utilizado na aplicação porque podemos trocar a implementação do gateway dependendo do ambiente.

Nesse projeto, por exemplo:

- Em desenvolvimento utilizamos o gateway que consome a API local (`json-server`)
- Em produção utilizamos o gateway que consome o `localstorage`
- Em testes utilizamos o gateway que salva os dados em memória

## `~/gateways/registration-gateway-http`

Pode ser importante comentar que o adapter de http está utilizando o `BASE_URL` chumbado no código.
O ideal seria mover esse `BASE_URL` para uma váriavel de ambiente do VITE e la no composition root
(`main.tsx`) passar ela como argumento na construção da classe `RegistrationGatewayHttp`.

Eu não fiz essas alterações porque em produção estamos usando um `gateway` que salva os dados no `localstorage`.

Para utilizar variaveis de ambiente de uma forma legal aqui seria importante criar um `~/enviroments.ts` que retorna
uma classe que faz um `wrapper` para o `import.meta.env` e retorna as variaveis de ambiente typadas. Caso
tenha alguma variavel de ambiente que seja required, podemos fazer um `throw new Error` no `constructor` da classe
caso a variavel não exista informando uma mensagem amigável para o desenvolvedor.
